#!/bin/sh

start()
{
  local self="`realpath "$0"`"
  local base="`dirname -- "$self"`"

  source "$base/../env" &&
  merge_environment /srv || return 255

  local command="
    exec bin/postgres -D '$PACKAGE_STORAGE/postgresql/data'
  "

  cd "$PACKAGE_ROOT" &&
  \
  exec su -c "$command" postgresql 2>&1 \
    | /boot/timestamp \
    >> "$PACKAGE_STORAGE/postgresql/logs/startup.log"
}

start
exit "$?"

